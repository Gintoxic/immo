regionList<-c("Nordrhein-Westfalen/Dortmund")
for (region in regionList)
{
f<-getImmo(region=region,maxPages = 1000)
attributes<-as.data.frame(matrix(unlist(strsplit(f$attributes, ";")), nrow=dim(f)[1], ncol=3, byrow = T), stringsAsFactors = F)
colnames(attributes)<-c("price","area", "rooms")
fa<-cbind(f,attributes)
fa$importdate<-Sys.Date()
fa$region<-region
region_<-gsub("/","_",region)
date_<-format(Sys.Date(), "%Y%m%d")
rms<-fa$rooms%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("Zi.","",x) else x)%>%unlist() ###Zi.
fa$rooms<-rms
prc<-fa$price%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub(" \u20ac","",x) else x)%>%unlist() ###€
#prc2<-prc%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("\002e","",x) else x)%>%unlist()
fa$price<-prc
are<-fa$area%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("m\u00b2","",x) else x)%>%unlist() ### m²
fa$area<-are
tit<-fa$title%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("\u0022","",x) else x)%>%unlist() ### """
fa$title<-tit
colnames(fa)[9]<-"attribs"
str(fa)
dir.create(paste("../immoData/",date_, sep=""))
filenameCSV<-paste("../immoData/",date_,"/",region_, "_",date_, ".csv",sep="")
write.table(fa,file =  filenameCSV, row.names = F, sep=";", fileEncoding="UTF-8", quote = TRUE)
filenameRda<-paste("../immoData/",date_,"/",region_, "_",date_, ".Rdata",sep="")
save("fa", file=filenameRda)
#writeImmo(fa)
}
fa[1:10,]
gsub(",",".",fa$price)
gsub(",",".",rms)
as.numeric(gsub(",",".",rms))
are
as.numeric(are)
prc
gsub(".", "", rms)
gsub("\.", "", rms)
gsub("\002e", "", rms)
gsub("\002e", "", prc)
substr(prc,2,1)
str(prc)
sub("\002e", "", prc)
sub(".", "", prc)
sub(".", " ", prc)
sub("..", " ", prc)
sub("", " ", prc)
sub("\002e", " ", prc)
prc[1022]
gsub(".","",prc[1022])
sub(".","",prc[1022])
str(prc[1022])
class(prc[1022])
substr(prc,2,1)
substr(prc[1022],2,1)
as.raw(prc)
str(prc)
t<-prc[1022]
t
substr(t,1,1)
substr(t,2,1)
substr(t,3,1)
substr(t,1,3)
substr(t,3,3)
substr(t,4,3)
substr(t,3,3)
substr(t,2)
substr(t,2,1)
substr(t,1,1)
substr(t,1,2)
substr(t,2,2)
nchar(prc)
nchar(prc)==5
which(nchar(prc)==5)
prc[which(nchar(prc)==5)]
s<-prc[which(nchar(prc)==5)]
bef<-substr(s,1,1)
bef
regexec(".",s)
aft<-substr(s,3,5)
aft
s<-prc[which(nchar(prc) %in% c(5,6,7))]
s
prcl<-prc[which(nchar(prc) %in% c(5,6,7))]
lind<-which(nchar(prc) %in% c(5,6,7))
prc[lind]
bef<-substr(prc[lind],1,1)
aft<-substr(prc[lind],3,5)
conc<-paste(bef,aft,sep = "")
conc
lind<-which(nchar(prc) %in% c(5))
bef<-substr(prc[lind],1,1)
aft<-substr(prc[lind],3,5)
conc<-paste(bef,aft,sep = "")
prcw<-prc
prcw[lind]<-conc
prcw
regionList<-c("Nordrhein-Westfalen/Dortmund")
for (region in regionList)
{
f<-getImmo(region=region,maxPages = 1000)
attributes<-as.data.frame(matrix(unlist(strsplit(f$attributes, ";")), nrow=dim(f)[1], ncol=3, byrow = T), stringsAsFactors = F)
colnames(attributes)<-c("price","area", "rooms")
fa<-cbind(f,attributes)
fa$importdate<-Sys.Date()
fa$region<-region
region_<-gsub("/","_",region)
date_<-format(Sys.Date(), "%Y%m%d")
rms<-fa$rooms%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("Zi.","",x) else x)%>%unlist() ###Zi.
fa$rooms<-as.numeric(gsub(",",".",rms))
prc<-fa$price%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub(" \u20ac","",x) else x)%>%unlist() ###€
lind<-which(nchar(prc) %in% c(5))
bef<-substr(prc[lind],1,1)
aft<-substr(prc[lind],3,5)
conc<-paste(bef,aft,sep = "")
prcw<-prc
prcw[lind]<-conc
fa$price<-prcw
are<-fa$area%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("m\u00b2","",x) else x)%>%unlist() ### m²
fa$area<-as.numeric(are)
tit<-fa$title%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("\u0022","",x) else x)%>%unlist() ### """
fa$title<-tit
colnames(fa)[9]<-"attribs"
str(fa)
dir.create(paste("../immoData/",date_, sep=""))
filenameCSV<-paste("../immoData/",date_,"/",region_, "_",date_, ".csv",sep="")
write.table(fa,file =  filenameCSV, row.names = F, sep=";", fileEncoding="UTF-8", quote = TRUE)
filenameRda<-paste("../immoData/",date_,"/",region_, "_",date_, ".Rdata",sep="")
save("fa", file=filenameRda)
#writeImmo(fa)
}
regionList<-c("Nordrhein-Westfalen/Dortmund")
for (region in regionList)
{
f<-getImmo(region=region,maxPages = 1000)
attributes<-as.data.frame(matrix(unlist(strsplit(f$attributes, ";")), nrow=dim(f)[1], ncol=3, byrow = T), stringsAsFactors = F)
colnames(attributes)<-c("price","area", "rooms")
fa<-cbind(f,attributes)
fa$importdate<-Sys.Date()
fa$region<-region
region_<-gsub("/","_",region)
date_<-format(Sys.Date(), "%Y%m%d")
rms<-fa$rooms%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("Zi.","",x) else x)%>%unlist() ###Zi.
fa$rooms<-as.numeric(gsub(",",".",rms))
prc<-fa$price%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub(" \u20ac","",x) else x)%>%unlist() ###€
lind<-which(nchar(prc) %in% c(5))
bef<-substr(prc[lind],1,1)
aft<-substr(prc[lind],3,5)
conc<-paste(bef,aft,sep = "")
prcw<-prc
prcw[lind]<-conc
fa$price<-as.numeric(prcw)
are<-fa$area%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("m\u00b2","",x) else x)%>%unlist() ### m²
fa$area<-as.numeric(are)
tit<-fa$title%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("\u0022","",x) else x)%>%unlist() ### """
fa$title<-tit
colnames(fa)[9]<-"attribs"
str(fa)
dir.create(paste("../immoData/",date_, sep=""))
filenameCSV<-paste("../immoData/",date_,"/",region_, "_",date_, ".csv",sep="")
write.table(fa,file =  filenameCSV, row.names = F, sep=";", fileEncoding="UTF-8", quote = TRUE)
filenameRda<-paste("../immoData/",date_,"/",region_, "_",date_, ".Rdata",sep="")
save("fa", file=filenameRda)
#writeImmo(fa)
}
fa[1:10,]
str(fa)
regionList<-c("Nordrhein-Westfalen/Dortmund")
library(XML)
library(rjson)
library(dplyr)
source("getImmo.R")
source("writeImmo.R")
regionList<-c("Nordrhein-Westfalen/Dortmund")
for (region in regionList)
{
f<-getImmo(region=region,maxPages = 1000)
attributes<-as.data.frame(matrix(unlist(strsplit(f$attributes, ";")), nrow=dim(f)[1], ncol=3, byrow = T), stringsAsFactors = F)
colnames(attributes)<-c("price","area", "rooms")
fa<-cbind(f,attributes)
fa$importdate<-Sys.Date()
fa$region<-region
region_<-gsub("/","_",region)
date_<-format(Sys.Date(), "%Y%m%d")
rms<-fa$rooms%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("Zi.","",x) else x)%>%unlist() ###Zi.
fa$rooms<-as.numeric(gsub(",",".",rms))
prc<-fa$price%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub(" \u20ac","",x) else x)%>%unlist() ###€
lind<-which(nchar(prc) %in% c(5))
bef<-substr(prc[lind],1,1)
aft<-substr(prc[lind],3,5)
conc<-paste(bef,aft,sep = "")
prcw<-prc
prcw[lind]<-conc
fa$price<-as.numeric(prcw)
are<-fa$area%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("m\u00b2","",x) else x)%>%unlist() ### m²
fa$area<-as.numeric(are)
tit<-fa$title%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("\u0022","",x) else x)%>%unlist() ### """
fa$title<-tit
colnames(fa)[9]<-"attribs"
str(fa)
dir.create(paste("../immoData/",date_, sep=""))
filenameCSV<-paste("../immoData/",date_,"/",region_, "_",date_, ".csv",sep="")
write.table(fa,file =  filenameCSV, row.names = F, sep=";", fileEncoding="UTF-8", quote = TRUE)
filenameRda<-paste("../immoData/",date_,"/",region_, "_",date_, ".Rdata",sep="")
save("fa", file=filenameRda)
writeImmo(fa)
}
regionList<-c("Rheinland-Pfalz/Koblenz",
"Rheinland-Pfalz/Mainz",
"Nordrhein-Westfalen/Duesseldorf",
"Nordrhein-Westfalen/Koeln",
"Nordrhein-Westfalen/Bonn",
"Nordrhein-Westfalen/Leverkusen"
"Nordrhein-Westfalen/Hagen",
"Hamburg/Hamburg",
"Bremen/Bremen",
"Berlin/Berlin"
"Bayern/Muenchen",
"Hessen/Frankfurt-am-Main",
"Bayern/Muenchen"
)
regionList<-c("Rheinland-Pfalz/Koblenz",
"Rheinland-Pfalz/Mainz",
"Nordrhein-Westfalen/Duesseldorf",
"Nordrhein-Westfalen/Koeln",
"Nordrhein-Westfalen/Bonn",
"Nordrhein-Westfalen/Leverkusen",
"Nordrhein-Westfalen/Hagen",
"Hamburg/Hamburg",
"Bremen/Bremen",
"Berlin/Berlin"
"Bayern/Muenchen",
"Hessen/Frankfurt-am-Main",
"Bayern/Muenchen"
)
regionList<-c("Rheinland-Pfalz/Koblenz",
"Rheinland-Pfalz/Mainz",
"Nordrhein-Westfalen/Duesseldorf",
"Nordrhein-Westfalen/Koeln",
"Nordrhein-Westfalen/Bonn",
"Nordrhein-Westfalen/Leverkusen",
"Nordrhein-Westfalen/Hagen",
"Hamburg/Hamburg",
"Bremen/Bremen",
"Berlin/Berlin"
"Bayern/Muenchen",
"Hessen/Frankfurt-am-Main"
)
regionList<-c("Rheinland-Pfalz/Koblenz",
"Rheinland-Pfalz/Mainz",
"Nordrhein-Westfalen/Duesseldorf",
"Nordrhein-Westfalen/Koeln",
"Nordrhein-Westfalen/Bonn",
"Nordrhein-Westfalen/Leverkusen",
"Nordrhein-Westfalen/Hagen",
"Hamburg/Hamburg",
"Bremen/Bremen",
"Berlin/Berlin"
"Bayern/Muenchen",
"Hessen/Frankfurt-am-Main"
)
regionList<-c("Rheinland-Pfalz/Koblenz",
"Rheinland-Pfalz/Mainz",
"Nordrhein-Westfalen/Duesseldorf",
"Nordrhein-Westfalen/Koeln",
"Nordrhein-Westfalen/Bonn",
"Nordrhein-Westfalen/Leverkusen",
"Nordrhein-Westfalen/Hagen",
"Hamburg/Hamburg",
"Bremen/Bremen",
"Berlin/Berlin"
"Bayern/Muenchen",
"Hessen/Frankfurt-am-Main")
regionList<-c("Rheinland-Pfalz/Koblenz",
"Rheinland-Pfalz/Mainz",
"Nordrhein-Westfalen/Duesseldorf",
"Nordrhein-Westfalen/Koeln",
"Nordrhein-Westfalen/Bonn",
"Nordrhein-Westfalen/Leverkusen",
"Nordrhein-Westfalen/Hagen",
"Hamburg/Hamburg",
"Bremen/Bremen",
"Berlin/Berlin"
"Bayern/Muenchen",
"Hessen/Frankfurt-am-Main")
regionList<-c("Rheinland-Pfalz/Koblenz",
"Rheinland-Pfalz/Mainz",
"Nordrhein-Westfalen/Duesseldorf",
"Nordrhein-Westfalen/Koeln",
"Nordrhein-Westfalen/Bonn",
"Nordrhein-Westfalen/Leverkusen",
"Nordrhein-Westfalen/Hagen",
"Hamburg/Hamburg",
"Bremen/Bremen",
"Berlin/Berlin")
regionList<-c("Rheinland-Pfalz/Koblenz",
"Rheinland-Pfalz/Mainz",
"Nordrhein-Westfalen/Duesseldorf",
"Nordrhein-Westfalen/Koeln",
"Nordrhein-Westfalen/Bonn",
"Nordrhein-Westfalen/Leverkusen",
"Nordrhein-Westfalen/Hagen",
"Hamburg/Hamburg",
"Bremen/Bremen",
"Berlin/Berlin")
"Hessen/Frankfurt-am-Main")
regionList<-c("Rheinland-Pfalz/Koblenz",
"Rheinland-Pfalz/Mainz",
"Nordrhein-Westfalen/Duesseldorf",
"Nordrhein-Westfalen/Koeln",
"Nordrhein-Westfalen/Bonn",
"Nordrhein-Westfalen/Leverkusen",
"Nordrhein-Westfalen/Hagen",
"Hamburg/Hamburg",
"Bremen/Bremen",
"Berlin/Berlin")
regionList<-c("Rheinland-Pfalz/Koblenz",
"Rheinland-Pfalz/Mainz",
"Nordrhein-Westfalen/Duesseldorf",
"Nordrhein-Westfalen/Koeln",
"Nordrhein-Westfalen/Bonn",
"Nordrhein-Westfalen/Leverkusen",
"Nordrhein-Westfalen/Hagen",
"Hamburg/Hamburg",
"Bremen/Bremen",
"Berlin/Berlin")
for (region in regionList)
{
f<-getImmo(region=region,maxPages = 1000)
attributes<-as.data.frame(matrix(unlist(strsplit(f$attributes, ";")), nrow=dim(f)[1], ncol=3, byrow = T), stringsAsFactors = F)
colnames(attributes)<-c("price","area", "rooms")
fa<-cbind(f,attributes)
fa$importdate<-Sys.Date()
fa$region<-region
region_<-gsub("/","_",region)
date_<-format(Sys.Date(), "%Y%m%d")
rms<-fa$rooms%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("Zi.","",x) else x)%>%unlist() ###Zi.
fa$rooms<-as.numeric(gsub(",",".",rms))
prc<-fa$price%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub(" \u20ac","",x) else x)%>%unlist() ###€
lind<-which(nchar(prc) %in% c(5))
bef<-substr(prc[lind],1,1)
aft<-substr(prc[lind],3,5)
conc<-paste(bef,aft,sep = "")
prcw<-prc
prcw[lind]<-conc
fa$price<-as.numeric(prcw)
are<-fa$area%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("m\u00b2","",x) else x)%>%unlist() ### m²
fa$area<-as.numeric(are)
tit<-fa$title%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("\u0022","",x) else x)%>%unlist() ### """
fa$title<-tit
colnames(fa)[9]<-"attribs"
str(fa)
dir.create(paste("../immoData/",date_, sep=""))
filenameCSV<-paste("../immoData/",date_,"/",region_, "_",date_, ".csv",sep="")
write.table(fa,file =  filenameCSV, row.names = F, sep=";", fileEncoding="UTF-8", quote = TRUE)
filenameRda<-paste("../immoData/",date_,"/",region_, "_",date_, ".Rdata",sep="")
save("fa", file=filenameRda)
writeImmo(fa)
}
library(XML)
library(rjson)
library(dplyr)
source("getImmo.R")
source("writeImmo.R")
regionList<-c("Rheinland-Pfalz/Koblenz",
"Rheinland-Pfalz/Mainz",
"Nordrhein-Westfalen/Duesseldorf",
"Nordrhein-Westfalen/Koeln",
"Nordrhein-Westfalen/Bonn",
"Nordrhein-Westfalen/Leverkusen",
"Nordrhein-Westfalen/Hagen",
"Hamburg/Hamburg",
"Bremen/Bremen",
"Berlin/Berlin")
#regionList<-c("Nordrhein-Westfalen/Dortmund")
for (region in regionList)
{
f<-getImmo(region=region,maxPages = 1000)
attributes<-as.data.frame(matrix(unlist(strsplit(f$attributes, ";")), nrow=dim(f)[1], ncol=3, byrow = T), stringsAsFactors = F)
colnames(attributes)<-c("price","area", "rooms")
fa<-cbind(f,attributes)
fa$importdate<-Sys.Date()
fa$region<-region
region_<-gsub("/","_",region)
date_<-format(Sys.Date(), "%Y%m%d")
rms<-fa$rooms%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("Zi.","",x) else x)%>%unlist() ###Zi.
fa$rooms<-as.numeric(gsub(",",".",rms))
prc<-fa$price%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub(" \u20ac","",x) else x)%>%unlist() ###€
lind<-which(nchar(prc) %in% c(5))
bef<-substr(prc[lind],1,1)
aft<-substr(prc[lind],3,5)
conc<-paste(bef,aft,sep = "")
prcw<-prc
prcw[lind]<-conc
fa$price<-as.numeric(prcw)
are<-fa$area%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("m\u00b2","",x) else x)%>%unlist() ### m²
fa$area<-as.numeric(are)
tit<-fa$title%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("\u0022","",x) else x)%>%unlist() ### """
fa$title<-tit
colnames(fa)[9]<-"attribs"
str(fa)
dir.create(paste("../immoData/",date_, sep=""))
filenameCSV<-paste("../immoData/",date_,"/",region_, "_",date_, ".csv",sep="")
write.table(fa,file =  filenameCSV, row.names = F, sep=";", fileEncoding="UTF-8", quote = TRUE)
filenameRda<-paste("../immoData/",date_,"/",region_, "_",date_, ".Rdata",sep="")
save("fa", file=filenameRda)
writeImmo(fa)
}
dbWriteTable( channel, "immolist",append=T )
library(XML)
library(rjson)
library(dplyr)
source("getImmo.R")
source("writeImmo.R")
regionList<-c("Nordrhein-Westfalen/Dortmund")
for (region in regionList)
{
f<-getImmo(region=region,maxPages = 1000)
attributes<-as.data.frame(matrix(unlist(strsplit(f$attributes, ";")), nrow=dim(f)[1], ncol=3, byrow = T), stringsAsFactors = F)
colnames(attributes)<-c("price","area", "rooms")
fa<-cbind(f,attributes)
fa$importdate<-Sys.Date()
fa$region<-region
region_<-gsub("/","_",region)
date_<-format(Sys.Date(), "%Y%m%d")
rms<-fa$rooms%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("Zi.","",x) else x)%>%unlist() ###Zi.
fa$rooms<-as.numeric(gsub(",",".",rms))
prc<-fa$price%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub(" \u20ac","",x) else x)%>%unlist() ###€
lind<-which(nchar(prc) %in% c(5))
bef<-substr(prc[lind],1,1)
aft<-substr(prc[lind],3,5)
conc<-paste(bef,aft,sep = "")
prcw<-prc
prcw[lind]<-conc
fa$price<-as.numeric(prcw)
are<-fa$area%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("m\u00b2","",x) else x)%>%unlist() ### m²
fa$area<-as.numeric(are)
tit<-fa$title%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("\u0022","",x) else x)%>%unlist() ### """
fa$title<-tit
colnames(fa)[9]<-"attribs"
str(fa)
dir.create(paste("../immoData/",date_, sep=""))
filenameCSV<-paste("../immoData/",date_,"/",region_, "_",date_, ".csv",sep="")
write.table(fa,file =  filenameCSV, row.names = F, sep=";", fileEncoding="UTF-8", quote = TRUE)
filenameRda<-paste("../immoData/",date_,"/",region_, "_",date_, ".Rdata",sep="")
save("fa", file=filenameRda)
writeImmo(fa)
}
source('D:/Work/immo/writeImmo.R')
writeImmo(fa)
source('D:/Work/immo/writeImmo.R')
library(XML)
library(rjson)
library(dplyr)
source("getImmo.R")
source("writeImmo.R")
# region = "Rheinland-Pfalz/Koblenz"
# region = "Rheinland-Pfalz/Mainz"
# region = "Berlin/Berlin"
# region = "Hamburg/Hamburg"
# region = "Bremen/Bremen"
# region = "Nordrhein-Westfalen/Koeln"
# region = "Nordrhein-Westfalen/Bonn"
# region ="Nordrhein-Westfalen/Dortmund"
# region ="Nordrhein-Westfalen/Duesseldorf"
# region ="Nordrhein-Westfalen/Leverkusen"
# region ="Nordrhein-Westfalen/Duisburg"
# region ="Nordrhein-Westfalen/Hagen"
# region ="Nordrhein-Westfalen/Siegen-Wittgenstein-Kreis/Siegen"
regionList<-c("Rheinland-Pfalz/Koblenz",
"Rheinland-Pfalz/Mainz",
"Nordrhein-Westfalen/Duesseldorf",
"Nordrhein-Westfalen/Koeln",
"Nordrhein-Westfalen/Bonn",
"Nordrhein-Westfalen/Leverkusen",
"Nordrhein-Westfalen/Hagen",
"Hamburg/Hamburg",
"Bremen/Bremen",
"Berlin/Berlin")
for (region in regionList)
{
f<-getImmo(region=region,maxPages = 1000)
attributes<-as.data.frame(matrix(unlist(strsplit(f$attributes, ";")), nrow=dim(f)[1], ncol=3, byrow = T), stringsAsFactors = F)
colnames(attributes)<-c("price","area", "rooms")
fa<-cbind(f,attributes)
fa$importdate<-Sys.Date()
fa$region<-region
region_<-gsub("/","_",region)
date_<-format(Sys.Date(), "%Y%m%d")
rms<-fa$rooms%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("Zi.","",x) else x)%>%unlist() ###Zi.
fa$rooms<-as.numeric(gsub(",",".",rms))
prc<-fa$price%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub(" \u20ac","",x) else x)%>%unlist() ###€
lind<-which(nchar(prc) %in% c(5))
bef<-substr(prc[lind],1,1)
aft<-substr(prc[lind],3,5)
conc<-paste(bef,aft,sep = "")
prcw<-prc
prcw[lind]<-conc
fa$price<-as.numeric(prcw)
are<-fa$area%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("m\u00b2","",x) else x)%>%unlist() ### m²
fa$area<-as.numeric(are)
tit<-fa$title%>%lapply(function(x) if(is.character(x)|is.factor(x)) gsub("\u0022","",x) else x)%>%unlist() ### """
fa$title<-tit
colnames(fa)[9]<-"attribs"
str(fa)
dir.create(paste("../immoData/",date_, sep=""))
filenameCSV<-paste("../immoData/",date_,"/",region_, "_",date_, ".csv",sep="")
write.table(fa,file =  filenameCSV, row.names = F, sep=";", fileEncoding="UTF-8", quote = TRUE)
filenameRda<-paste("../immoData/",date_,"/",region_, "_",date_, ".Rdata",sep="")
save("fa", file=filenameRda)
writeImmo(fa)
}
